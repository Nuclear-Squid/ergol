+++
title = "Fabrication dâ€™un clavier ergonomique"
date = 2024-11-02T19:12:55+01:00
author = "trilowy"
tags = ["clavier", "split", "corne", "fabrication"]
+++

Je suis partie dâ€™aucune connaissance en clavier ergonomique (jâ€™avais le bon gros
clavier Â«â€¯100â€¯%â€¯Â» avec pavÃ© numÃ©rique, les touches de fonctions, etc) Ã  un petit
clavier ergonomiqueâ€¯: le **Corne**.

Je te raconte ici mon voyage initiatique dans le monde des claviers en espÃ©rant
que Ã§a puisse tâ€™aider Ã  te lancer Ã  ton tourâ€¯ğŸ™‚.

<!--more-->

![Le Corne, rÃ©sultat final](corne_01.webp)


Anatomie dâ€™un clavier
--------------------------------------------------------------------------------

Apprenons Ã  connaitre la bÃªteâ€¯!

Il existe 2 types de clavierâ€¯:

- les claviers Ã  membranes
- les claviers mÃ©caniques

Les *claviers Ã  membranes* reprÃ©sentent la trÃ¨s grosse majoritÃ© des claviers car
peu cher Ã  produire. Si tu ne sais pas de quel type est ton clavier, câ€™est
sÃ»rement un clavier Ã  membrane.

On va sâ€™intÃ©resser ici aux *claviers mÃ©caniques* car ils permettent une
fabrication Â«â€¯artisanaleâ€¯Â». Chaque piÃ¨ce peut Ãªtre remplacÃ©e, mais ils coÃ»tent
plus cher Ã  produire. La fourchette de prix dÃ©marre dans la 60â€¯aine dâ€™euros et
peut monter Ã  plusieurs centaines dâ€™eurosâ€¯!

Mais grÃ¢ce Ã  la modularitÃ© des claviers mÃ©caniques, chaque touche peut Ãªtre
arrangÃ©e diffÃ©remment, et on va donc trouver une trÃ¨s grande variÃ©tÃ© de claviers
**ergonomiques** mÃ©caniques.

### Les touches

CommenÃ§ons par les piÃ¨ces les plus intÃ©ressantes du clavier mÃ©caniquesâ€¯: les
**touches**, bien souvent appelÃ©es <i lang="en">key switches</i>.

Ici aussi, on va essentiellement retrouver 2 sortes de switchesâ€¯:

- les Choc
- les MX

Ces switches diffÃ¨rent par leur empreinte sur le <i lang="en">PCB</i> et pour
les <i lang="en">keycaps</i> (on va voir plus tard ce que câ€™est).

Ce quâ€™il faut retenir, câ€™est que seul Kailh produit des Chocs, mais ceux-ci ont
*profil plus bas* (<i lang="en">low-profile</i>, les touches sont moins hautes)
que les MX. En revanche les MX sont plus faciles Ã  trouver et moins chers.

Hormis ce choix entre Choc et MX, 2 autres critÃ¨res trÃ¨s importants sont Ã 
prendre en compteâ€¯: le Â«â€¯touchÃ©â€¯Â» et la force dâ€™activation.

Ce que jâ€™appelle Â«â€¯touchÃ©â€¯Â» peut Ãªtre de 3 sortesâ€¯:

- **tactile**â€¯: appuyer sur la touche fait un petit Â«â€¯bumpâ€¯Â», comme les claviers
de PC portable
- **linÃ©aire**â€¯: appuyer sur la touche se fait de maniÃ¨re linÃ©aire comme son nom
lâ€™indique, pas de rÃ©sistance diffÃ©rente jusquâ€™Ã  ce quâ€™on arrive en bout de
course
- **clicky**â€¯: comme pour le tactile mais avec en plus un petit Â«â€¯clicâ€¯Â» sonore
Ã  chaque activation de touche, qui a fait la rÃ©putation des claviers mÃ©caniques
comme clavier non appropriÃ© pour un environnement de travail ğŸ˜…

Pour ce qui est de la force dâ€™activation, elle est notÃ©e en grammes, câ€™est le
poids quâ€™il faut mettre sur la touche pour enfoncer le ressort Ã  lâ€™intÃ©rieur et
ainsi lâ€™activer. Plus câ€™est lÃ©ger plus la touche sera facile Ã  activer,
augmentant la sensation dâ€™ergonomie, mais moins on pourra laisser reposer ses
doigts sur le claviers sans activer les-dites touches. Les switches lÃ©gers
demandent un certain temps dâ€™adaptation.

![Kailh Choc Red Pro linÃ©aires 35â€¯g](key_switches.webp)


### Les capuchons

Les capuchons ou <i lang="en">keycaps</i> sont ce qui couvre les touches, sur
lesquels les doigts reposent et oÃ¹ il est notÃ© les lettres de la touche.

La seule contrainte est quâ€™il faut quâ€™ils soient compatibles avec les switches.

Il en existe avec diffÃ©rents profils (la faÃ§on dont ils sont sculptÃ©s) plus ou
moins hauts.

Ils peuvent Ãªtre Â«â€¯<i lang="en">blank</i>â€¯Â» (rien nâ€™est Ã©crit dessus, il faut
savoir Ã©crire Ã  lâ€™aveugle).

Les types Â«â€¯<i lang="en">homing</i>â€¯Â» ont un relief pour permettre de placer au
toucher les 2 index de la main en position dactylo.

Pour les touches des pouces ils peuvent Ãªtre convexes pour ne pas avoir dâ€™arÃªte
gÃªnante sur le bord.

Avoir diffÃ©rentes largeursâ€¯: 1â€¯U Ã©tant le carrÃ© de rÃ©fÃ©rence, 2â€¯U sera un 
capuchon rectangulaire de 2 unitÃ©s de long par 1 unitÃ© de large.

![Keycaps MBK Choc blank avec pouces convexes et homing](keycaps.webp)


### Le PCB

Le circuit imprimÃ© ou PCB (<i lang="en">Printed Circuit Board</i>) est la partie
permettant de relier tous les composants du clavier entre eux, un peu comme la
carte mÃ¨re dâ€™un PC.

Le PCB est directement responsable de la gÃ©omÃ©trie que va prendre le clavier,
câ€™est donc Ã  choisir avec soin. Pour un clavier Â«â€¯<i lang="en">split</i>â€¯Â»
(câ€™est-Ã -dire sÃ©parÃ© en 2 parties main gauche/main droite), on aura donc 2 PCB.

Lâ€™arrangement des touches va dÃ©pendre du PCB. Sur un clavier classique on va
avoir ce quâ€™on appelle un Â«â€¯<i lang="en">row stagger</i>â€¯Â», câ€™est-Ã -dire un
dÃ©calage des touches entre les diffÃ©rentes lignes qui fait quâ€™elles ne sont pas
alignÃ©es en colonne pour chaque doigt sur le clavier. Lâ€™auriculaire nâ€™a pas un
mouvement de simple repli/extension pour <kbd>A</kbd>, <kbd>Q</kbd> et
<kbd>W</kbd>, il doit aussi dÃ©caler de maniÃ¨re horizontale. Ceci est une
contrainte hÃ©ritÃ©e des machines Ã  Ã©crire mais nâ€™est pas souhaitable en
ergonomie.

Au contraire du row stagger, on va plutÃ´t rencontrer du Â«â€¯<i lang="en">column
stagger</i>â€¯Â» sur les claviers ergonomiquesâ€¯: ce column stagger permet de
prendre en compte le fait que tous les doigts nâ€™ont pas la mÃªme longueur. En
particulier on va parler de Â«â€¯<i lang="en">pinky stagger</i>â€¯Â» plus ou moins
important pour dÃ©signer le dÃ©calage de la colonne de touches dÃ©diÃ©es aux
auriculaires.

Dâ€™autres claviers sont ortholinÃ©aires, ils ont leur disposition de touches en
grille.

Le PCB influence directement le nombre de touches sur le clavier. Un clavier
avec moins de touches coÃ»tera mathÃ©matiquement moins cher en composants quâ€™un
ayant plus de touches. Mais ce nâ€™est pas la seule raison pour laquelle les gens
se tournent vers ces petits claviersâ€¯: mettre Ã  portÃ©e de doigts toutes les
touches amÃ©liore grandement le confort de frappe, et câ€™est aussi lÃ  un fondement
de la philosophie de la disposition Ergoâ€‘L. Et pour faire rentrer toutes les
touches dont on a besoin au quotidien (mÃªme les touches fonctions ou un pavÃ©
numÃ©riqueâ€¯!) on peut profiter du fait que ces claviers quâ€™on va fabriquer sont
programmables (jâ€™y reviendrai par la suite).

Une derniÃ¨re remarque par rapport aux PCB, câ€™est que leur compatibilitÃ© nâ€™est
pas garantie avec tous les types de switchesâ€¯: Choc a de plus petites touches
que MX, un PCB Choc va parfois avoir les touches plus rapprochÃ©es les unes des
autres, donc des switches MX ou capuchons MX ne rentreront pas. Les pattes des
switches MX et Choc sont diffÃ©rentes (on parle dâ€™empreintes diffÃ©rentes), mÃªme
si certains PCB ont des trous pour accepter des switches MX ou Choc, mais dans
ce cas on parlera donc de Â«â€¯<i lang="en">MX spacing</i>â€¯Â» plutÃ´t que
Â«â€¯<i lang="en">Choc spacing</i>â€¯Â», câ€™est-Ã -dire quâ€™il y aura un peu de Â«â€¯jourâ€¯Â»
entre les keycaps Choc sur ce genre de PCB.

Aussi, les switches peuvent Ãªtre directement soudÃ©s sur le PCB, mais dans ce cas
il est trÃ¨s difficile dâ€™en changerâ€¯: Ã  rÃ©server pour les personnes sachant
exactement les switches quâ€™elles veulent. Lâ€™alternative Ã©tant des
Â«â€¯<i lang="en">hotswaps</i>â€¯Â», câ€™est des petits composants soudÃ©s au PCB
permettant de clipser les switches sans devoir souder les switches. Les hotswaps
sont, de fait, diffÃ©rents entre MX et Choc.

On peut tester diffÃ©rentes gÃ©omÃ©tries populaires de clavier par rapport Ã  nos
mains sur [ce comparateur][comparateur de gÃ©omÃ©trie clavier], bien quâ€™il ne soit
plus mis Ã  jour avec les modÃ¨les rÃ©cents.

![Le PCB du Corne avec des hotswaps Choc](pcb.webp)


### Le MCU

Le MCU (<i lang="en">microcontroller</i>, pas le Marvel Cinematic Universe ğŸ˜)
est le cerveau du clavier. GrÃ¢ce Ã  cette puce on va pouvoir programmer ce quâ€™on
envoie Ã  lâ€™ordinateur lorquâ€™une ou plusieurs touches sont pressÃ©es.

Il est parfois remplacÃ© par des composants directement soudÃ©s sur le PCB.

Le MCU se Â«â€¯<i lang="en">flash</i>â€¯Â» avec un Â«â€¯<i lang="en">firmware</i>â€¯Â»,
câ€™est-Ã -dire quâ€™on va y dÃ©poser un programme pour quâ€™il puisse envoyer des codes
de touches en fonction des touches que lâ€™on presse rÃ©ellement.

Dans le cas dâ€™un clavier split, il sâ€™occupe aussi de rÃ©concilier ce qui se passe
sur les 2 moitiÃ©s (si on appuie sur Shift dâ€™une main et une lettre de lâ€™autre,
on veut que les 2 touches pressÃ©es soient bien envoyÃ©es en mÃªme temps pour faire
une majuscule).

Pour un clavier filaire il est courant dâ€™utiliser [QMK], mais il en existe
dâ€™autres comme [Via] ou [Vial] qui se veulent plus faciles Ã  configurer.

Pour un clavier Bluetooth, seul [ZMK] est possible, et ne permet pas dans sa
version officielle, Ã  lâ€™heure actuelle, dâ€™Ã©muler les mouvements de souris avec
le clavier. Un Ã©diteur visuel pour ZMK est disponible Ã 
[cette adresse][keymap-editor pour ZMK] et a toutes les fonctionnalitÃ©s de base
pour bien dÃ©buter. Par contre pour builder un firmware il faudra un projet
Github.

Pour jouer avec la programmation dâ€™un clavier non programmable que tâ€™as dÃ©jÃ 
sous les doigts (et voir si câ€™est fait pour toi ce genre de clavier), jette un
Å“il Ã  [arsenik]â€¯!

![Le nice!nano, un MCU Bluetooth](mcu.webp)


### Les accessoires

Les claviers viennent avec dâ€™autres composants facultatifs. Par exemple des
Ã©crans (comme les nice!view) pour voir lâ€™Ã©tat de connexion Bluetooth, le niveau
de batterie, etc.

Un cable TRRS pour connecter les 2 moitiÃ©s dâ€™un split filaire.

Des LED pour avoir de belles illuminations (attention Ã§a consomme trop de
batterie pour Ãªtre mis sur un clavier sur batterie).

Une Â«â€¯<i lang="en">case</i>â€¯Â» qui est le boitier du clavier. Souvent imprimÃ© en
3D, mais certaines peuvent Ãªtre en aluminium. 

![Case imprimÃ©e en 3D](case.webp)

Les batteries pour les claviers sans fil. Pour ce tout petit modÃ¨le de 110â€¯mAh
qui se glisse sous mon MCU la charge se fait en USBâ€‘C via le nice!nano. La
moitiÃ© gauche du clavier (qui sert de receveur de la moitiÃ© droite, ce qui est
trÃ¨s consommateur de batterie) dure environ 1 semaine Ã  pleine charge, et la
moitiÃ© droite (qui fait juste de lâ€™envoi, peu consommateur) environ 1 mois, les
2 ayant les Ã©crans nice!view Ã  alimenter.

![Batteries 110â€¯mAh](batteries.webp)

Le Â«â€¯<i lang="en">tenting</i>â€¯Â», le fait dâ€™incliner les 2 moitiÃ©s de clavier sur
un angle plus naturel pour les mains peut se faire avec des accessoires plus ou
moins officiellement prÃ©vus pour Ã§a (par exemple, on peut dÃ©tourner de leur but
originel les supports de tÃ©lÃ©phone type Â«â€¯MagSafeâ€¯Â»).


Mon clavierâ€¯: Corne sans fil
--------------------------------------------------------------------------------

Le [Corne] est filaire Ã  la base, mais [Typeractive] (crÃ©ateur des nice!nano et
nice!view) en a fait une version sans fil non libre.

Leur configurateur est simple Ã  utiliser pour les personnes qui dÃ©butent. On
peut choisir les couleurs et les accessoires. Leur site est basÃ© aux USA
(attention TVA Ã  prÃ©voir Ã  lâ€™importation car elle nâ€™est pas collectÃ©e sur leur
site vendeur). Leur Discord permet de poser des questions et dâ€™obtenir du
support (en anglais par contre).

Les hotswaps et les diodes pour les switches sont dÃ©jÃ  soudÃ©s, il ne reste quâ€™Ã 
souder les hotswaps pour les MCU et Ã©crans, mais il existe une version
<i lang="en">no-solder</i> de ces hotswaps pour ne pas avoir Ã  sortir de fer Ã 
souder.

Jâ€™ai pris un kit pour un Corne en 3x6+3 touches, avec Ã©crans. Pour les switches
Choc Red Pro jâ€™ai pris sur Aliexpress en mÃªme temps que les batteries. Le tout
mâ€™est revenu Ã  260â€¯â‚¬, livraison et TVA comprise.

![Kit Typeractive](kit.webp)

Pour plus dâ€™informations sur mon clavier je tâ€™invite Ã  faire un tour sur le
[#showroom-claviers] du serveur [Discord Ergoâ€‘L]. On parle beaucoup Â«â€¯clavierâ€¯Â»
lÃ -bas, tu y trouveras certainement rÃ©ponse Ã  tes questions.

![Corne assemblÃ©](corne_02.webp)


Le mot de la fin
--------------------------------------------------------------------------------

Merci dâ€™avoir tout lu pour arriver jusquâ€™ici (et coucou Ã  toi qui a tout zappÃ©
pour arriver Ã  une conclusion qui rÃ©sume tout ce long article, mais il nâ€™y en a
pas, va falloir tout lire si tu veux les info ğŸ˜…).

Nâ€™hÃ©site pas Ã  proposer des corrections sur le [Github] si besoin.


[comparateur de gÃ©omÃ©trie clavier]: https://jhelvy.shinyapps.io/splitkbcompare/
[QMK]: https://qmk.fm/
[Vial]: https://get.vial.today/
[Via]: https://www.caniusevia.com/
[ZMK]: https://zmk.dev/
[keymap-editor pour ZMK]: https://nickcoutsos.github.io/keymap-editor/
[arsenik]: https://github.com/OneDeadKey/arsenik
[Corne]: https://github.com/foostan/crkbd
[Typeractive]: https://typeractive.xyz
[#showroom-claviers]: https://discord.com/channels/1046720208171175946/1259963199852380290/1259963199852380290
[Discord Ergoâ€‘L]: https://discord.com/invite/5xR5K3nAFX
[Github]: https://github.com/Nuclear-Squid/ergol